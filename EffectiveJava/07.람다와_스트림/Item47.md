## 47. 반환 타입으로는 스트림보다 컬렉션이 낫다.

### 스트림의 반복 지원

- 스트림은 반복을 지원하지 않는다. 따라서 스트림과 반복을 알맞게 조합해야 좋은 코드가 나온다.
- API를 스트림만 반환하도록 짜놓으면 반환된 스트림을 forEach로 반복하길 원하는 사용자는 불만이 있을 것이다.
- Stream 인터페이스는 Iterable 인터페이스가 정의한 추상 메서드를 전부 포함할 뿐만 아니라 Iterable 인터페이스가 정의한 방식대로 동작한다.
- Strem이 Iterable을 확장하지 않았기 때문에 forEach로 반복할 수 없는 것이다.



### Collection 인터페이스

- Collection 인터페이스는 Iterable의 하위 타입이고 stram 메서드도 제공하니 반복과 스트림을 동시에 지원한다.
- 원소 시퀀스를 반환하는 공개 API의 반환 타입에는 Collection이나 그 하위 타입을 쓰는 게 일반적으로 최선이다.
- 하지만 컬렉션을 반환한다는 이유로 덩치 큰 시퀀스를 메모리에 올려서는 안된다.



### 핵심

- 원소 시퀀스를 반환하는 메서드를 작성할 때는 이를 스트림으로 처리하기를 원하는 사용자와 반복으로 처리하길 원하는 사용자가 모두 있을수 있음을 떠올려야 한다.
- 컬렉션을 반환할 수 있으면 그렇게 하는 것이 좋다.
- 반환 전부터 이미 원소들을 컬렉션에 담아 관리하고 있거나 컬렉션을 하나 더 만들어도 될 정도로 원소 개수가 적다면 표준 컬렉션에 담아 반환하는 것이 좋다.
- 컬렉션을 반환하는 것이 불가능하면 스트림과 Iterable 중 더 자연스러운 것을 반환하면 된다. 

