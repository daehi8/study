## 테이블 설계 

### 테이블의 통합과 분리

|             |         OneToOne Type          |                  Plus Type                   |           Single Type           |
| :---------: | :----------------------------: | :------------------------------------------: | :-----------------------------: |
|    특징     |          개별 테이블           |              슈퍼 + 서브 테이블              |           단일 테이블           |
|   확장성    |              좋음              |                     보통                     |              나쁨               |
|  조인성능   |              나쁨              |                     나쁨                     |              좋음               |
| I/O량 성능  |              좋음              |                     좋음                     |              나쁨               |
| 관리 용이성 |              나쁨              |                     나쁨                     |              좋음               |
|  선택 방법  | 개별 테이블로 접근이 많은 경우 | 슈퍼 + 서브 형식으로 데이터를  처리하는 경우 | 전체를 일괄적으로 처리하는 경우 |

#### 개별 테이블

- 컬럼 추가시 확장성이 좋고 업무 디펜던시 제거

- 테이블을 개별로 만들어야하고 SQL 조인시 각각 조인하므로 관리용이성이 나쁨



#### 슈퍼 + 서브 테이블

- 테이블 조인시 하나의 슈퍼 테이블과 조인을 해도 공통 속성을 조회할 수 있지만 개별 속성을 조회할 때는 각각의 개별 테이블과 조인



#### 통합테이블

- 하나의 테이블과만 조인해도 모든 속성 조회 가능

- 하나의 테이블만 바라보게 되며 테이블 ALTER가 빈번

- 대량의 데이터가 발생함에 따라 성능 저하 이슈 발생 가능



#### 통합과 분리

- 공통적인 부분은 최대한 묶어주는 것이 중요

- 통합과 분리는 데이터의 양과 트랜잭션 유형 고려

- 데이터 양이 적으면 성능상 이슈가 적으므로 되도록 통합

- 데이터 양이 많으면 슈퍼/서브테이블로 분리 고려



#### 순환참조

- 자기자신 테이블의 PK를 일반 속성으로 넣는 방식

- CONNECT BY START WITH으로 선행상태 추적가능



#### 테이블 종류의 체계적 관리

- 내용이 비슷한 테이블을 명확하게 구분하는 것이 중요



#### 대량거래 설계

- 테이블의 스키마가 FULL이 차게 되는 경우 고려

- 안쓰는 스키마를 DELETE 하는 방법과 컬럼 자릿수를 늘리는 방법을 사용하게 될 경우 여러 프로그램을 다시 수정해야 하는 상황 발생

- 처음 데이터 설계 시 많은 고민 필요

- 하루 평균 데이터 발생을 계산해 FULL이 차게 되는 예상일자를 고려해 유지보수가 가능하도록 설계



#### 성능 최적화 설계

|      |                  채번 엔터티                  |                            시퀀스                            |                            Max+1                             |
| :--: | :-------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| 장점 | 순차적으로 엄격하게 채번<br />체계적으로 채번 | nextval로 사용하기 용이<br />가장 빠른 성능<br />최소한의 Lock 발생 | 별도의 객체 불필요<br />순차적으로 엄격하게 채번<br />체계적으로 채번 |
| 단점 |    객체 증가<br />Lock 사용으로 느린 채번     | 불편한 체계 부여<br />비어있는 번호 발생 가능<br />객체 증가 | Lock 사용으로 느린 채번<br />예외 상황 발생 가능<br />최대값 관리에 부담 존재 |



#### 배치 대용양 처리

- FOR LOOP 로직으로 DBMS를 여러 차례 콜하는 방식 지양

- 다건 SELECT 후 INSERT 하거나 MERGE문을 허용해 DBMS콜을 1회만 하는 방식 사용



